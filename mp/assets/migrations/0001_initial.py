# Generated by Django 4.2 on 2023-06-16 08:40

from django.db import migrations, models
import django.db.models.deletion
import mirage.fields
import mp.assets.models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='Assets',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('assets_type', models.CharField(choices=[('server', '物理机'), ('vmser', '虚拟机'), ('switch', '交换机'), ('route', '路由器'), ('printer', '打印机'), ('scanner', '扫描仪'), ('firewall', '防火墙'), ('storage', '存储设备'), ('wifi', '无线设备'), ('other', '其它设备')], default='server', max_length=100, verbose_name='资产类型')),
                ('status', models.CharField(choices=[('on', '使用中'), ('off', '未使用'), ('maintenance', '维护'), ('other', '其它状态')], default='on used', max_length=30, verbose_name='资产状态')),
                ('number', models.CharField(max_length=32, unique=True, verbose_name='资产编号')),
                ('sn', models.CharField(blank=True, max_length=128, null=True, verbose_name='序列号SN')),
                ('manufacturer', models.CharField(blank=True, max_length=64, null=True, verbose_name='制造商')),
                ('version', models.CharField(blank=True, max_length=100, null=True, verbose_name='版本')),
                ('model', models.CharField(blank=True, max_length=54, null=True, verbose_name='资产型号')),
                ('management_ip', models.GenericIPAddressField(blank=True, null=True, verbose_name='管理IP')),
                ('group', models.SmallIntegerField(blank=True, null=True, verbose_name='使用组')),
                ('created_by', models.CharField(blank=True, default='', max_length=32, verbose_name='创建者')),
                ('u', models.IntegerField(blank=True, choices=[(1, '1U'), (2, '2U'), (4, '4U')], null=True, verbose_name='U数')),
                ('comment', models.TextField(blank=True, null=True, verbose_name='备注')),
            ],
            options={
                'verbose_name': '资产管理',
                'verbose_name_plural': '总资产表',
                'db_table': 'mp_assets',
                'ordering': ['-created_at'],
                'permissions': (('add_assets', '添加资产'), ('change_assets', '修改资产'), ('delete_assets', '删除资产'), ('view_assets', '查看资产')),
                'default_permissions': (),
            },
        ),
        migrations.CreateModel(
            name='Idc',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('idc_name', models.CharField(max_length=32, unique=True, verbose_name='机房名称')),
                ('idc_zone_name', models.CharField(max_length=100, verbose_name='区域名称')),
                ('idc_operator', models.CharField(default='自营', max_length=32, verbose_name='运营商')),
                ('idc_contact', models.CharField(max_length=16, verbose_name='机房联系人')),
                ('idc_phone', models.CharField(blank=True, default='', max_length=20, null=True, verbose_name='联系人电话')),
                ('idc_bandwidth', models.CharField(blank=True, default='', max_length=32, verbose_name='机房带宽')),
                ('idc_address', models.CharField(max_length=200, verbose_name='机房地址')),
                ('idc_comment', models.TextField(blank=True, max_length=200, verbose_name='备注')),
            ],
            options={
                'verbose_name': '机房管理',
                'verbose_name_plural': '机房管理',
                'db_table': 'mp_idc_assets',
                'ordering': ['-created_at'],
                'permissions': (('add_idc', '添加机房'), ('change_idc', '修改机房'), ('delete_idc', '删除机房'), ('view_idc', '查看机房')),
                'default_permissions': (),
            },
        ),
        migrations.CreateModel(
            name='SshUser',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('sign', models.CharField(max_length=100, unique=True, verbose_name='唯一标识')),
                ('username', models.CharField(max_length=100, verbose_name='用户名')),
                ('port', models.DecimalField(blank=True, decimal_places=0, default=22, max_digits=6, verbose_name='端口')),
                ('password', mirage.fields.EncryptedCharField(blank=True, default='', max_length=200, null=True, verbose_name='密码')),
                ('pkey', mirage.fields.EncryptedTextField(blank=True, max_length=6000, null=True, verbose_name='密钥')),
                ('pkey_path', models.FileField(blank=True, null=True, upload_to=mp.assets.models.upload, verbose_name='密钥地址')),
                ('pkey_password', mirage.fields.EncryptedCharField(blank=True, default='', max_length=300, null=True, verbose_name='密钥密码')),
                ('created_by', models.CharField(blank=True, max_length=32, null=True, verbose_name='创建者')),
                ('comment', models.TextField(blank=True, null=True, verbose_name='备注')),
            ],
            options={
                'verbose_name': 'ssh 账号管理',
                'verbose_name_plural': 'ssh 账号管理',
                'db_table': 'mp_auth_users',
                'permissions': (('add_ssh_user', '添加ssh账号'), ('change_ssh_user', '修改ssh账号'), ('delete_ssh_user', '删除ssh账号'), ('view_ssh_user', '查看ssh账号')),
                'default_permissions': (),
            },
        ),
        migrations.CreateModel(
            name='RAM',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('size', models.IntegerField(verbose_name='内存大小（GB）')),
                ('sn', models.CharField(blank=True, max_length=128, null=True, verbose_name='SN')),
                ('model', models.CharField(blank=True, max_length=128, null=True, verbose_name='内存型号')),
                ('slot', models.CharField(blank=True, max_length=64, null=True, verbose_name='内存插槽')),
                ('manufactory', models.CharField(blank=True, max_length=64, null=True, verbose_name='内存生产商')),
                ('speed', models.CharField(blank=True, max_length=64, null=True, verbose_name='内存速率')),
                ('ram_max_size', models.CharField(blank=True, max_length=24, null=True, verbose_name='最大内存')),
                ('ram_max_slot', models.IntegerField(blank=True, null=True, verbose_name='插槽个数')),
                ('comment', models.TextField(blank=True, null=True, verbose_name='备注')),
                ('assets', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ram', to='assets.assets', verbose_name='所属资产')),
            ],
            options={
                'verbose_name': '内存管理',
                'verbose_name_plural': '内存管理',
                'db_table': 'mp_asset_ram',
                'ordering': ['-created_at'],
                'permissions': (('add_ram', '添加内存'), ('change_ram', '修改内存'), ('delete_ram', '删除内存'), ('view_ram', '查看内存')),
                'default_permissions': (),
            },
        ),
        migrations.CreateModel(
            name='DISK',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('name', models.CharField(blank=True, max_length=64, null=True, verbose_name='设备名称')),
                ('wwn', models.CharField(blank=True, max_length=50, null=True, unique=True, verbose_name='硬盘序列号（WWN）')),
                ('host', models.CharField(blank=True, max_length=255, null=True, verbose_name='硬盘控制器')),
                ('device_size', models.CharField(blank=True, max_length=100, null=True, verbose_name='硬盘容量')),
                ('device_vendor', models.CharField(blank=True, max_length=64, null=True, verbose_name='硬盘生产商')),
                ('device_model', models.CharField(blank=True, max_length=128, null=True, verbose_name='硬盘型号')),
                ('partitions', models.JSONField(blank=True, null=True, verbose_name='分区信息')),
                ('comment', models.TextField(blank=True, null=True, verbose_name='备注')),
                ('assets', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='disk', to='assets.assets')),
            ],
            options={
                'verbose_name': '硬盘管理',
                'verbose_name_plural': '硬盘管理',
                'db_table': 'mp_asset_disk',
                'ordering': ['-created_at'],
                'permissions': (('add_disk', '添加硬盘'), ('change_disk', '修改硬盘'), ('delete_disk', '删除硬盘'), ('view_disk', '查看硬盘')),
                'default_permissions': (),
            },
        ),
        migrations.CreateModel(
            name='Cabinet',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('cabinet_name', models.CharField(max_length=100, verbose_name='机柜标签')),
                ('cabinet_band', models.PositiveIntegerField(blank=True, null=True, verbose_name='机柜带宽')),
                ('cabinet_cost', models.DecimalField(blank=True, decimal_places=2, max_digits=8, null=True, verbose_name='费用')),
                ('cabinet_comment', models.TextField(blank=True, max_length=200, verbose_name='备注')),
                ('expired_time', models.DateTimeField(blank=True, null=True, verbose_name='到期时间')),
                ('idc', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cabinet_assets', to='assets.idc', verbose_name='所属机房')),
            ],
            options={
                'verbose_name': '机柜管理',
                'verbose_name_plural': '机柜管理',
                'db_table': 'mp_cabinet_assets',
                'ordering': ['-created_at'],
                'permissions': (('add_cabinet', '添加机柜'), ('change_cabinet', '修改机柜'), ('delete_cabinet', '删除机柜'), ('view_cabinet', '查看机柜')),
                'default_permissions': (),
                'unique_together': {('idc', 'cabinet_name')},
            },
        ),
        migrations.AddField(
            model_name='assets',
            name='jg',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='asset', to='assets.cabinet', verbose_name='所属机柜'),
        ),
        migrations.CreateModel(
            name='ServerAssets',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('ip', models.GenericIPAddressField(verbose_name='IP地址')),
                ('hostname', models.CharField(max_length=80, unique=True, verbose_name='主机名')),
                ('cpu_model', models.CharField(blank=True, max_length=100, null=True, verbose_name='cpu 型号')),
                ('cpu_number', models.SmallIntegerField(blank=True, null=True, verbose_name='cpu 数量')),
                ('vcpu_number', models.SmallIntegerField(blank=True, null=True, verbose_name='虚拟核数')),
                ('cpu_core', models.SmallIntegerField(blank=True, null=True, verbose_name='cpu 核数')),
                ('platform', models.CharField(blank=True, max_length=128, null=True, verbose_name='平台')),
                ('os', models.CharField(blank=True, max_length=128, null=True, verbose_name='系统')),
                ('os_version', models.CharField(blank=True, max_length=16, null=True, verbose_name='系统版本')),
                ('os_arch', models.CharField(blank=True, max_length=16, null=True, verbose_name='系统架构')),
                ('kernel', models.CharField(blank=True, max_length=200, null=True, verbose_name='内核信息')),
                ('disk_total', models.IntegerField(blank=True, null=True, verbose_name='总硬盘容量')),
                ('ram_total', models.IntegerField(blank=True, null=True, verbose_name='总内存容量')),
                ('hostname_raw', models.CharField(blank=True, max_length=128, null=True, verbose_name='原始主机名')),
                ('assets', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, to='assets.assets')),
                ('hosted_on', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='hosted_on_server', to='assets.serverassets', verbose_name='所属物理机')),
                ('ssh', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='assets.sshuser', verbose_name='ssh user')),
            ],
            options={
                'verbose_name': '资产管理',
                'verbose_name_plural': '服务器资产表',
                'db_table': 'mp_server_assets',
                'permissions': (('add_server_assets', '添加服务资产'), ('change_server_asset', '修改服务资产'), ('delete_server_asset', '删除服务资产'), ('view_server_asset', '查看服务资产')),
                'default_permissions': (),
                'unique_together': {('ip', 'hostname')},
            },
        ),
        migrations.CreateModel(
            name='NIC',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('name', models.CharField(max_length=64, verbose_name='名称')),
                ('mac', models.CharField(blank=True, max_length=64, null=True, verbose_name='MAC地址')),
                ('ip', models.GenericIPAddressField(blank=True, null=True, verbose_name='IP地址')),
                ('netmask', models.CharField(blank=True, max_length=64, null=True, verbose_name='掩码')),
                ('promisc', models.BooleanField(default=True, verbose_name='混杂模式')),
                ('is_ipv4_default', models.BooleanField(default=False, verbose_name='是否为默认IP地址')),
                ('gateway', models.GenericIPAddressField(blank=True, null=True, verbose_name='网关')),
                ('speed', models.CharField(blank=True, max_length=10, null=True, verbose_name='速率')),
                ('types', models.CharField(blank=True, max_length=20, null=True, verbose_name='类型')),
                ('module', models.CharField(blank=True, max_length=100, null=True, verbose_name='模块')),
                ('active', models.SmallIntegerField(blank=True, null=True, verbose_name='是否在线')),
                ('comment', models.TextField(blank=True, null=True, verbose_name='备注')),
                ('assets', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='nic', to='assets.assets', verbose_name='所属资产')),
            ],
            options={
                'verbose_name': '网卡管理',
                'verbose_name_plural': '网卡管理',
                'db_table': 'mp_asset_nic',
                'ordering': ['-created_at'],
                'permissions': (('add_nic', '增加网卡'), ('change_nic', '修改网卡'), ('delete_nic', '删除网卡'), ('view_nic', '查看网卡')),
                'default_permissions': (),
                'unique_together': {('assets', 'mac')},
            },
        ),
    ]
